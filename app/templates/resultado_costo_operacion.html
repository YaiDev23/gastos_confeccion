{% extends "base.html" %}

{% block content %}
<a href="/costo-operacion" class="btn back-btn">
    <i style="margin-right: 8px;">â†</i> Volver al formulario
</a>

<h1>ğŸ’¼ Resumen de Costos de OperaciÃ³n</h1>
<div style="text-align: center; color: #7f8c8d; margin-bottom: 20px; font-size: 15px;">
    <div style="margin: 10px 0;">
        <strong>Operarias sin prestaciones:</strong> {{ datos.cantidad_trabajadoras }} | 
        <strong>Operarias con prestaciones:</strong> {{ datos.cantidad_trabajadoras_prestaciones }} | 
        <strong>Aprendices:</strong> {{ datos.cantidad_practicantes }}
    </div>
    <div style="color: #95a5a6; font-size: 13px;">
        ğŸ“… {{ fecha_hora_bogota }}
    </div>
</div>

<div class="result-section">
    <h3 style="margin-top: 0; color: #2c3e50;">
        <i style="margin-right: 8px;">ğŸ“Š</i> Desglose de Gastos Diarios:
    </h3>
    
    <div class="cost-item">
        <span class="cost-label">ğŸ‘©â€ğŸ­ Operarias (Sin prestaciones):</span>
        <span class="cost-value">${{ "{:,}".format(datos.costo_trabajadoras) }} COP</span>
    </div>
    
    {% if datos.operarias %}
    <div style="background: #f8f9fa; border-left: 3px solid #3498db; padding: 12px; margin: 10px 0; border-radius: 4px;">
        <p style="margin: 0 0 8px 0; color: #2c3e50; font-weight: 500;">Detalle de operarias:</p>
        {% for operaria in datos.operarias %}
        <div style="padding: 6px 0; color: #555; font-size: 14px; border-bottom: 1px solid #e0e0e0;">
            <span>{{ operaria.nombre }} {{ operaria.apellido }}</span>
            <span style="float: right; color: #27ae60; font-weight: 500;">${{ "{:,}".format(operaria.salario) }} COP</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="cost-item">
        <span class="cost-label">ğŸ‘©â€ğŸ’¼ Operarias con prestaciones ({{ datos.cantidad_trabajadoras_prestaciones }} Ã— salario BD):</span>
        <span class="cost-value">${{ "{:,}".format(datos.costo_trabajadoras_prestaciones) }} COP</span>
    </div>
    
    <div class="cost-item">
        <span class="cost-label">ğŸ‘¨â€ğŸ“ Aprendices ({{ datos.cantidad_practicantes }} Ã— salario BD):</span>
        <span class="cost-value">${{ "{:,}".format(datos.costo_practicantes) }} COP</span>
    </div>
    
    {% if datos.aprendices %}
    <div style="background: #f8f9fa; border-left: 3px solid #9b59b6; padding: 12px; margin: 10px 0; border-radius: 4px;">
        <p style="margin: 0 0 8px 0; color: #2c3e50; font-weight: 500;">Detalle de aprendices:</p>
        {% for aprendiz in datos.aprendices %}
        <div style="padding: 6px 0; color: #555; font-size: 14px; border-bottom: 1px solid #e0e0e0;">
            <span>{{ aprendiz.nombre }} {{ aprendiz.apellido }}</span>
            <span style="float: right; color: #27ae60; font-weight: 500;">${{ "{:,}".format(aprendiz.salario) }} COP</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="cost-item">
        <span class="cost-label">ğŸ“ Arriendo diario:</span>
        <span class="cost-value">${{ "{:,}".format(datos.arriendo_diario) }} COP</span>
    </div>

    <div class="cost-item">
        <span class="cost-label">ğŸ§µ Hilos:</span>
        <span class="cost-value">${{ "{:,}".format(datos.gastos_fijos.hilos) }} COP</span>
    </div>
    
    <div class="cost-item">
        <span class="cost-label">âš¡ Luz:</span>
        <span class="cost-value">${{ "{:,}".format(datos.gastos_fijos.luz) }} COP</span>
    </div>
    
    <div class="cost-item">
        <span class="cost-label">âš™ï¸ MÃ¡quinas:</span>
        <span class="cost-value">${{ "{:,}".format(datos.gastos_fijos.maquinas) }} COP</span>
    </div>
    
    <div class="cost-item">
        <span class="cost-label total">ğŸ’° COSTO TOTAL DIARIO:</span>
        <span class="cost-value total">${{ "{:,}".format(datos.costo_operacion) }} COP</span>
    </div>
</div>

<div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); border-radius: 12px; border-left: 5px solid #28a745;">
    <h4 style="margin-top: 0; color: #155724;">
        <i style="margin-right: 8px;">â„¹ï¸</i> InformaciÃ³n Adicional:
    </h4>
    <div style="color: #155724; font-size: 15px;">
        <div style="padding: 8px; margin: 5px 0; background-color: rgba(255,255,255,0.6); border-radius: 6px;">
            <strong>Costo por trabajador promedio:</strong> 
            {% if (datos.cantidad_trabajadoras + datos.cantidad_practicantes) > 0 %}
                ${{ "{:,}".format((datos.costo_trabajadoras + datos.costo_practicantes) // (datos.cantidad_trabajadoras + datos.cantidad_practicantes)) }} COP
            {% else %}
                $0 COP
            {% endif %}
        </div>
        <div style="padding: 8px; margin: 5px 0; background-color: rgba(255,255,255,0.6); border-radius: 6px;">
            <strong>Gastos fijos totales:</strong> ${{ "{:,}".format(datos.gastos_fijos_total + datos.arriendo_diario) }} COP
            <br>
            <small style="color: #0b5345;">({{ "{:.1f}".format(((datos.gastos_fijos_total + datos.arriendo_diario) / datos.costo_operacion * 100) if datos.costo_operacion > 0 else 0) }}% del total)</small>
        </div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px;">
    <a href="/costo-operacion" class="btn" style="margin-top: 0;">
        <i style="margin-right: 8px;">ğŸ”„</i> Nuevo CÃ¡lculo
    </a>
    <a href="/" class="btn" style="background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); margin-top: 0;">
        <i style="margin-right: 8px;">ğŸ </i> Ir al MenÃº
    </a>
</div>
{% endblock %}